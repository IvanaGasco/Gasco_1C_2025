<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Trabajo Práctico Integrador - Espirómetro: Referencia del Archivo /home/ivana/Escritorio/1_Cuartri_2025/Electronica_Programable/Gasco_1C_2025/Proyecto2/firmware/projects/TPI/main/tpi.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fiuner.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Trabajo Práctico Integrador - Espirómetro
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Buscar','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tpi_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">defines</a> &#124;
<a href="#func-members">Funciones</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Referencia del Archivo tpi.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="analog__io__mcu_8h_source.html">analog_io_mcu.h</a>&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="uart__mcu_8h_source.html">uart_mcu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer__mcu_8h_source.html">timer_mcu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="led_8h_source.html">led.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ble__mcu_8h_source.html">ble_mcu.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_m_p3v5050_8h_source.html">MP3v5050.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="switch_8h_source.html">switch.h</a>&quot;</code><br />
</div>
<p><a href="tpi_8c_source.html">Ir al código fuente de este archivo.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
defines</h2></td></tr>
<tr class="memitem:aca39b26c504c376043e30f633c1abaf8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#aca39b26c504c376043e30f633c1abaf8">PERIODO_MUESTREO</a>&#160;&#160;&#160;100000</td></tr>
<tr class="memdesc:aca39b26c504c376043e30f633c1abaf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Período de muestreo del temporizador en microsegundos (100ms).  <a href="tpi_8c.html#aca39b26c504c376043e30f633c1abaf8">Más...</a><br /></td></tr>
<tr class="separator:aca39b26c504c376043e30f633c1abaf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7613eca9f75b90f30f3bb011a2fc5622"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a7613eca9f75b90f30f3bb011a2fc5622">CICLOS_FIN_ESPIRACION</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a7613eca9f75b90f30f3bb011a2fc5622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cantidad de ciclos sin presión antes de marcar el fin de espiración.  <a href="tpi_8c.html#a7613eca9f75b90f30f3bb011a2fc5622">Más...</a><br /></td></tr>
<tr class="separator:a7613eca9f75b90f30f3bb011a2fc5622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f5fa843e817d6b7dd2fdb8df513d22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#ad6f5fa843e817d6b7dd2fdb8df513d22">Cd</a>&#160;&#160;&#160;0.97</td></tr>
<tr class="memdesc:ad6f5fa843e817d6b7dd2fdb8df513d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coeficiente de descarga del tubo Venturi.  <a href="tpi_8c.html#ad6f5fa843e817d6b7dd2fdb8df513d22">Más...</a><br /></td></tr>
<tr class="separator:ad6f5fa843e817d6b7dd2fdb8df513d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd92b430059d886880c53f13ae038e3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#acd92b430059d886880c53f13ae038e3f">A1</a>&#160;&#160;&#160;7.55e-4</td></tr>
<tr class="memdesc:acd92b430059d886880c53f13ae038e3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Área de entrada del tubo (en m²).  <a href="tpi_8c.html#acd92b430059d886880c53f13ae038e3f">Más...</a><br /></td></tr>
<tr class="separator:acd92b430059d886880c53f13ae038e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2946bc30423c2a996eeafa49e995c30e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a2946bc30423c2a996eeafa49e995c30e">A2</a>&#160;&#160;&#160;5.027e-5</td></tr>
<tr class="memdesc:a2946bc30423c2a996eeafa49e995c30e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Área de garganta del tubo (en m²).  <a href="tpi_8c.html#a2946bc30423c2a996eeafa49e995c30e">Más...</a><br /></td></tr>
<tr class="separator:a2946bc30423c2a996eeafa49e995c30e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade66e4ccafbc33b117610bbc0d85feb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">p</a>&#160;&#160;&#160;1.2</td></tr>
<tr class="memdesc:ade66e4ccafbc33b117610bbc0d85feb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Densidad del aire en Kg/m³.  <a href="tpi_8c.html#ade66e4ccafbc33b117610bbc0d85feb0">Más...</a><br /></td></tr>
<tr class="separator:ade66e4ccafbc33b117610bbc0d85feb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addfc29b6fbd750fa265ef21d3f300324"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#addfc29b6fbd750fa265ef21d3f300324">umbral</a>&#160;&#160;&#160;2.0</td></tr>
<tr class="memdesc:addfc29b6fbd750fa265ef21d3f300324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Umbral de presión en kPa para detectar inicio de espiración.  <a href="tpi_8c.html#addfc29b6fbd750fa265ef21d3f300324">Más...</a><br /></td></tr>
<tr class="separator:addfc29b6fbd750fa265ef21d3f300324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6b046b8e65b51e8fa0fd41e687265f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a1d6b046b8e65b51e8fa0fd41e687265f">umbral_objetivo</a>&#160;&#160;&#160;70.0</td></tr>
<tr class="memdesc:a1d6b046b8e65b51e8fa0fd41e687265f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Umbral de índice FEV1/CVF objetivo para LED verde.  <a href="tpi_8c.html#a1d6b046b8e65b51e8fa0fd41e687265f">Más...</a><br /></td></tr>
<tr class="separator:a1d6b046b8e65b51e8fa0fd41e687265f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6169a91956c1d71728cceb850488bd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a8c6169a91956c1d71728cceb850488bd">umbral_limite</a>&#160;&#160;&#160;50.0</td></tr>
<tr class="memdesc:a8c6169a91956c1d71728cceb850488bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Umbral de índice FEV1/CVF bajo el cual se enciende LED rojo.  <a href="tpi_8c.html#a8c6169a91956c1d71728cceb850488bd">Más...</a><br /></td></tr>
<tr class="separator:a8c6169a91956c1d71728cceb850488bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Funciones</h2></td></tr>
<tr class="memitem:afaccfed84cd1498a05ea04a65f1209b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#afaccfed84cd1498a05ea04a65f1209b1">FuncTimerA</a> (void *param)</td></tr>
<tr class="memdesc:afaccfed84cd1498a05ea04a65f1209b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Función de callback del temporizador. Notifica a la tarea de medición de presión cuando se alcanza el período.  <a href="tpi_8c.html#afaccfed84cd1498a05ea04a65f1209b1">Más...</a><br /></td></tr>
<tr class="separator:afaccfed84cd1498a05ea04a65f1209b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4716ba0e2555cd64666ad61294377c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#aa4716ba0e2555cd64666ad61294377c8">CalcularFlujoEspiracion</a> ()</td></tr>
<tr class="memdesc:aa4716ba0e2555cd64666ad61294377c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcula el flujo de aire espirado en m³/s a partir de la presión diferencial leída del sensor.  <a href="tpi_8c.html#aa4716ba0e2555cd64666ad61294377c8">Más...</a><br /></td></tr>
<tr class="separator:aa4716ba0e2555cd64666ad61294377c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96fa131acb51461af657d5e317bf4638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a96fa131acb51461af657d5e317bf4638">FuncTecla1</a> ()</td></tr>
<tr class="memdesc:a96fa131acb51461af657d5e317bf4638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Función asociada al SWITCH 1, el propósito es reiniciar los valores del BLE para comenzar de nuevo, sin embargo no se pudo implementar correctamente previamente se intentó enviar mediante un bucle for varios valores cero para reiniciar sin conseguirlo y actualmente al presionar la TECLA 1 se produce una desconexión en BLE.  <a href="tpi_8c.html#a96fa131acb51461af657d5e317bf4638">Más...</a><br /></td></tr>
<tr class="separator:a96fa131acb51461af657d5e317bf4638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a045041d965c37a1d425bcdab31b07c2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a045041d965c37a1d425bcdab31b07c2a">Detectar_Inicio_Fin_Espiracion</a> ()</td></tr>
<tr class="memdesc:a045041d965c37a1d425bcdab31b07c2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detecta el inicio y fin de la espiración según el valor de presión y ciclos.  <a href="tpi_8c.html#a045041d965c37a1d425bcdab31b07c2a">Más...</a><br /></td></tr>
<tr class="separator:a045041d965c37a1d425bcdab31b07c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b2ee362a6cda55124b1a2d9b8db8bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a06b2ee362a6cda55124b1a2d9b8db8bd">Calculo_FEV1_CVF</a> ()</td></tr>
<tr class="memdesc:a06b2ee362a6cda55124b1a2d9b8db8bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calcula los volúmenes espirados (CVF y FEV1) e índice FEV1/CVF.  <a href="tpi_8c.html#a06b2ee362a6cda55124b1a2d9b8db8bd">Más...</a><br /></td></tr>
<tr class="separator:a06b2ee362a6cda55124b1a2d9b8db8bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac272f7d90337bf50b6094f42976614"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#acac272f7d90337bf50b6094f42976614">Comunicacion_Serie</a> ()</td></tr>
<tr class="memdesc:acac272f7d90337bf50b6094f42976614"><td class="mdescLeft">&#160;</td><td class="mdescRight">Envía por UART el flujo de aire espirado y la presión medida.  <a href="tpi_8c.html#acac272f7d90337bf50b6094f42976614">Más...</a><br /></td></tr>
<tr class="separator:acac272f7d90337bf50b6094f42976614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a502ba15f62ab314bceffd8c35ceea29e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a502ba15f62ab314bceffd8c35ceea29e">Serial_Plotter</a> ()</td></tr>
<tr class="memdesc:a502ba15f62ab314bceffd8c35ceea29e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Envía el voltaje leído por el sensor al Serial Plotter.  <a href="tpi_8c.html#a502ba15f62ab314bceffd8c35ceea29e">Más...</a><br /></td></tr>
<tr class="separator:a502ba15f62ab314bceffd8c35ceea29e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70">app_main</a> (void)</td></tr>
<tr class="memdesc:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Función principal del programa. Inicializa periféricos, configura UART, BLE, temporizador y lanza la tarea de medición.  <a href="tpi_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70">Más...</a><br /></td></tr>
<tr class="separator:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2c61b109a6870fef4d676096fa0ed473"><td class="memItemLeft" align="right" valign="top">TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a2c61b109a6870fef4d676096fa0ed473">MedirPresionTaskHandle</a> = <a class="el" href="ili9341_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:a2c61b109a6870fef4d676096fa0ed473"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle de la tarea que mide presión.  <a href="tpi_8c.html#a2c61b109a6870fef4d676096fa0ed473">Más...</a><br /></td></tr>
<tr class="separator:a2c61b109a6870fef4d676096fa0ed473"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72df3cb793dce94f98ee0a71b118e0bf"><td class="memItemLeft" align="right" valign="top">TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a72df3cb793dce94f98ee0a71b118e0bf">ActualizarLedsTaskHandle</a> = <a class="el" href="ili9341_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:a72df3cb793dce94f98ee0a71b118e0bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle de la tarea que actualiza los LEDs.  <a href="tpi_8c.html#a72df3cb793dce94f98ee0a71b118e0bf">Más...</a><br /></td></tr>
<tr class="separator:a72df3cb793dce94f98ee0a71b118e0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a641435925a42f8dbbb8b754af49482d4"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a641435925a42f8dbbb8b754af49482d4">presion_Kpa</a> = 0</td></tr>
<tr class="memdesc:a641435925a42f8dbbb8b754af49482d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presión diferencial medida (en kPa).  <a href="tpi_8c.html#a641435925a42f8dbbb8b754af49482d4">Más...</a><br /></td></tr>
<tr class="separator:a641435925a42f8dbbb8b754af49482d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8973504ff871a1317a5554cdd01bf319"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a8973504ff871a1317a5554cdd01bf319">qv</a> = 0</td></tr>
<tr class="memdesc:a8973504ff871a1317a5554cdd01bf319"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flujo espirado en m³/s.  <a href="tpi_8c.html#a8973504ff871a1317a5554cdd01bf319">Más...</a><br /></td></tr>
<tr class="separator:a8973504ff871a1317a5554cdd01bf319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcc5c9f58beecd216195a160a973a4d"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a5dcc5c9f58beecd216195a160a973a4d">voltaje_mv</a></td></tr>
<tr class="memdesc:a5dcc5c9f58beecd216195a160a973a4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Voltaje leído en mV.  <a href="tpi_8c.html#a5dcc5c9f58beecd216195a160a973a4d">Más...</a><br /></td></tr>
<tr class="separator:a5dcc5c9f58beecd216195a160a973a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ebf8d5b2883994c8eec21614933117"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a53ebf8d5b2883994c8eec21614933117">periodo_actual</a> = <a class="el" href="tpi_8c.html#aca39b26c504c376043e30f633c1abaf8">PERIODO_MUESTREO</a></td></tr>
<tr class="memdesc:a53ebf8d5b2883994c8eec21614933117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Período actual del temporizador.  <a href="tpi_8c.html#a53ebf8d5b2883994c8eec21614933117">Más...</a><br /></td></tr>
<tr class="separator:a53ebf8d5b2883994c8eec21614933117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d2c7e452fa3160710875b92eaebf0d"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a53d2c7e452fa3160710875b92eaebf0d">msg</a> [32]</td></tr>
<tr class="memdesc:a53d2c7e452fa3160710875b92eaebf0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer para mensajes a enviar por UART o BLE.  <a href="tpi_8c.html#a53d2c7e452fa3160710875b92eaebf0d">Más...</a><br /></td></tr>
<tr class="separator:a53d2c7e452fa3160710875b92eaebf0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff57ba52c04ea5592d7fbf4ff27d93b4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#aff57ba52c04ea5592d7fbf4ff27d93b4">inicio_espiracion</a></td></tr>
<tr class="memdesc:aff57ba52c04ea5592d7fbf4ff27d93b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bandera que indica si se detectó el inicio de espiración.  <a href="tpi_8c.html#aff57ba52c04ea5592d7fbf4ff27d93b4">Más...</a><br /></td></tr>
<tr class="separator:aff57ba52c04ea5592d7fbf4ff27d93b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873980a26076dfd1e6146db6ec732acc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a873980a26076dfd1e6146db6ec732acc">fin_espiracion</a></td></tr>
<tr class="memdesc:a873980a26076dfd1e6146db6ec732acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bandera que indica si se detectó el fin de espiración.  <a href="tpi_8c.html#a873980a26076dfd1e6146db6ec732acc">Más...</a><br /></td></tr>
<tr class="separator:a873980a26076dfd1e6146db6ec732acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795639193e3f97984deccd59db746f43"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a795639193e3f97984deccd59db746f43">volumen_total_CVF</a> = 0</td></tr>
<tr class="memdesc:a795639193e3f97984deccd59db746f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Volumen total espirado (CVF).  <a href="tpi_8c.html#a795639193e3f97984deccd59db746f43">Más...</a><br /></td></tr>
<tr class="separator:a795639193e3f97984deccd59db746f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf63394302df6aa5e35616d49482ab2"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a7cf63394302df6aa5e35616d49482ab2">volumen_1s_FEV1</a> = 0</td></tr>
<tr class="memdesc:a7cf63394302df6aa5e35616d49482ab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Volumen espirado en el primer segundo (FEV1).  <a href="tpi_8c.html#a7cf63394302df6aa5e35616d49482ab2">Más...</a><br /></td></tr>
<tr class="separator:a7cf63394302df6aa5e35616d49482ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a778e38aa889751afffa2dea6b803e67a"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#a778e38aa889751afffa2dea6b803e67a">dt</a> = 0.1</td></tr>
<tr class="memdesc:a778e38aa889751afffa2dea6b803e67a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delta de tiempo entre mediciones (en segundos).  <a href="tpi_8c.html#a778e38aa889751afffa2dea6b803e67a">Más...</a><br /></td></tr>
<tr class="separator:a778e38aa889751afffa2dea6b803e67a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78bfbec0aad248d2f42f34aa6465600"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#ad78bfbec0aad248d2f42f34aa6465600">tiempo_total</a> = 0</td></tr>
<tr class="memdesc:ad78bfbec0aad248d2f42f34aa6465600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tiempo total transcurrido desde el inicio de espiración.  <a href="tpi_8c.html#ad78bfbec0aad248d2f42f34aa6465600">Más...</a><br /></td></tr>
<tr class="separator:ad78bfbec0aad248d2f42f34aa6465600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6c28c79f23c747c4e9a0805ec9041f9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#ac6c28c79f23c747c4e9a0805ec9041f9">indice_de_capacidad_pulmonar</a></td></tr>
<tr class="memdesc:ac6c28c79f23c747c4e9a0805ec9041f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Índice FEV1/CVF expresado en porcentaje.  <a href="tpi_8c.html#ac6c28c79f23c747c4e9a0805ec9041f9">Más...</a><br /></td></tr>
<tr class="separator:ac6c28c79f23c747c4e9a0805ec9041f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2fdc026289be03b84b5f4da8ce389c8"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tpi_8c.html#af2fdc026289be03b84b5f4da8ce389c8">ciclos_sin_presion</a> = 0</td></tr>
<tr class="memdesc:af2fdc026289be03b84b5f4da8ce389c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contador de ciclos consecutivos sin presión.  <a href="tpi_8c.html#af2fdc026289be03b84b5f4da8ce389c8">Más...</a><br /></td></tr>
<tr class="separator:af2fdc026289be03b84b5f4da8ce389c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentación de los 'defines'</h2>
<a id="acd92b430059d886880c53f13ae038e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd92b430059d886880c53f13ae038e3f">&#9670;&nbsp;</a></span>A1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define A1&#160;&#160;&#160;7.55e-4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Área de entrada del tubo (en m²). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00067">67</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="a2946bc30423c2a996eeafa49e995c30e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2946bc30423c2a996eeafa49e995c30e">&#9670;&nbsp;</a></span>A2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define A2&#160;&#160;&#160;5.027e-5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Área de garganta del tubo (en m²). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00070">70</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="ad6f5fa843e817d6b7dd2fdb8df513d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f5fa843e817d6b7dd2fdb8df513d22">&#9670;&nbsp;</a></span>Cd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Cd&#160;&#160;&#160;0.97</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Coeficiente de descarga del tubo Venturi. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00064">64</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="a7613eca9f75b90f30f3bb011a2fc5622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7613eca9f75b90f30f3bb011a2fc5622">&#9670;&nbsp;</a></span>CICLOS_FIN_ESPIRACION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CICLOS_FIN_ESPIRACION&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cantidad de ciclos sin presión antes de marcar el fin de espiración. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00061">61</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="ade66e4ccafbc33b117610bbc0d85feb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade66e4ccafbc33b117610bbc0d85feb0">&#9670;&nbsp;</a></span>p</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define p&#160;&#160;&#160;1.2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Densidad del aire en Kg/m³. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00073">73</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="aca39b26c504c376043e30f633c1abaf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca39b26c504c376043e30f633c1abaf8">&#9670;&nbsp;</a></span>PERIODO_MUESTREO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PERIODO_MUESTREO&#160;&#160;&#160;100000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Período de muestreo del temporizador en microsegundos (100ms). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00058">58</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="addfc29b6fbd750fa265ef21d3f300324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addfc29b6fbd750fa265ef21d3f300324">&#9670;&nbsp;</a></span>umbral</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define umbral&#160;&#160;&#160;2.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Umbral de presión en kPa para detectar inicio de espiración. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00076">76</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="a8c6169a91956c1d71728cceb850488bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c6169a91956c1d71728cceb850488bd">&#9670;&nbsp;</a></span>umbral_limite</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define umbral_limite&#160;&#160;&#160;50.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Umbral de índice FEV1/CVF bajo el cual se enciende LED rojo. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00082">82</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="a1d6b046b8e65b51e8fa0fd41e687265f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d6b046b8e65b51e8fa0fd41e687265f">&#9670;&nbsp;</a></span>umbral_objetivo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define umbral_objetivo&#160;&#160;&#160;70.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Umbral de índice FEV1/CVF objetivo para LED verde. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00079">79</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentación de las funciones</h2>
<a id="a630544a7f0a2cc40d8a7fefab7e2fe70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630544a7f0a2cc40d8a7fefab7e2fe70">&#9670;&nbsp;</a></span>app_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Función principal del programa. Inicializa periféricos, configura UART, BLE, temporizador y lanza la tarea de medición. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00321">321</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="ble__mcu_8c_source.html#l00453">BleInit()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a>, <a class="el" href="ble__mcu_8h_source.html#l00044">ble_config_t::device_name</a>, <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>, <a class="el" href="tpi_8c_source.html#l00136">FuncTimerA()</a>, <a class="el" href="led_8c_source.html#l00031">LedsInit()</a>, <a class="el" href="mp3v5050_8c_source.html#l00034">MP3v5050Init()</a>, <a class="el" href="ili9341_8c_source.html#l00019">NULL</a>, <a class="el" href="tpi_8c_source.html#l00058">PERIODO_MUESTREO</a>, <a class="el" href="uart__mcu_8h_source.html#l00039">serial_config_t::port</a>, <a class="el" href="switch_8h_source.html#l00032">SWITCH_1</a>, <a class="el" href="switch_8c_source.html#l00047">SwitchActivInt()</a>, <a class="el" href="switch_8c_source.html#l00029">SwitchesInit()</a>, <a class="el" href="timer__mcu_8h_source.html#l00040">timer_config_t::timer</a>, <a class="el" href="timer__mcu_8h_source.html#l00032">TIMER_A</a>, <a class="el" href="timer__mcu_8c_source.html#l00067">TimerInit()</a>, <a class="el" href="uart__mcu_8h_source.html#l00032">UART_PC</a> y <a class="el" href="uart__mcu_8c_source.html#l00107">UartInit()</a>.</p>

</div>
</div>
<a id="aa4716ba0e2555cd64666ad61294377c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4716ba0e2555cd64666ad61294377c8">&#9670;&nbsp;</a></span>CalcularFlujoEspiracion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CalcularFlujoEspiracion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcula el flujo de aire espirado en m³/s a partir de la presión diferencial leída del sensor. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00144">144</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="tpi_8c_source.html#l00067">A1</a>, <a class="el" href="tpi_8c_source.html#l00070">A2</a>, <a class="el" href="tpi_8c_source.html#l00064">Cd</a>, <a class="el" href="tpi_8c_source.html#l00073">p</a>, <a class="el" href="tpi_8c_source.html#l00092">presion_Kpa</a> y <a class="el" href="tpi_8c_source.html#l00095">qv</a>.</p>

</div>
</div>
<a id="a06b2ee362a6cda55124b1a2d9b8db8bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b2ee362a6cda55124b1a2d9b8db8bd">&#9670;&nbsp;</a></span>Calculo_FEV1_CVF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Calculo_FEV1_CVF </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calcula los volúmenes espirados (CVF y FEV1) e índice FEV1/CVF. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00194">194</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="tpi_8c_source.html#l00119">dt</a>, <a class="el" href="tpi_8c_source.html#l00125">indice_de_capacidad_pulmonar</a>, <a class="el" href="tpi_8c_source.html#l00095">qv</a>, <a class="el" href="tpi_8c_source.html#l00122">tiempo_total</a>, <a class="el" href="tpi_8c_source.html#l00116">volumen_1s_FEV1</a> y <a class="el" href="tpi_8c_source.html#l00113">volumen_total_CVF</a>.</p>

</div>
</div>
<a id="acac272f7d90337bf50b6094f42976614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac272f7d90337bf50b6094f42976614">&#9670;&nbsp;</a></span>Comunicacion_Serie()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Comunicacion_Serie </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Envía por UART el flujo de aire espirado y la presión medida. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00244">244</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="tpi_8c_source.html#l00125">indice_de_capacidad_pulmonar</a>, <a class="el" href="tpi_8c_source.html#l00104">msg</a>, <a class="el" href="tpi_8c_source.html#l00092">presion_Kpa</a>, <a class="el" href="tpi_8c_source.html#l00095">qv</a>, <a class="el" href="tpi_8c_source.html#l00122">tiempo_total</a>, <a class="el" href="uart__mcu_8h_source.html#l00032">UART_PC</a>, <a class="el" href="uart__mcu_8c_source.html#l00193">UartSendString()</a>, <a class="el" href="tpi_8c_source.html#l00116">volumen_1s_FEV1</a> y <a class="el" href="tpi_8c_source.html#l00113">volumen_total_CVF</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00321">app_main()</a>.</p>

</div>
</div>
<a id="a045041d965c37a1d425bcdab31b07c2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a045041d965c37a1d425bcdab31b07c2a">&#9670;&nbsp;</a></span>Detectar_Inicio_Fin_Espiracion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Detectar_Inicio_Fin_Espiracion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detecta el inicio y fin de la espiración según el valor de presión y ciclos. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00176">176</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="tpi_8c_source.html#l00061">CICLOS_FIN_ESPIRACION</a>, <a class="el" href="tpi_8c_source.html#l00128">ciclos_sin_presion</a>, <a class="el" href="tpi_8c_source.html#l00110">fin_espiracion</a>, <a class="el" href="tpi_8c_source.html#l00107">inicio_espiracion</a>, <a class="el" href="tpi_8c_source.html#l00092">presion_Kpa</a> y <a class="el" href="tpi_8c_source.html#l00076">umbral</a>.</p>

</div>
</div>
<a id="a96fa131acb51461af657d5e317bf4638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96fa131acb51461af657d5e317bf4638">&#9670;&nbsp;</a></span>FuncTecla1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FuncTecla1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Función asociada al SWITCH 1, el propósito es reiniciar los valores del BLE para comenzar de nuevo, sin embargo no se pudo implementar correctamente previamente se intentó enviar mediante un bucle for varios valores cero para reiniciar sin conseguirlo y actualmente al presionar la TECLA 1 se produce una desconexión en BLE. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00155">155</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="ble__hid__mcu_8h_source.html#l00039">BLE_CONNECTED</a>, <a class="el" href="ble__mcu_8c_source.html#l00545">BleSendString()</a>, <a class="el" href="ble__mcu_8c_source.html#l00531">BleStatus()</a>, <a class="el" href="tpi_8c_source.html#l00128">ciclos_sin_presion</a>, <a class="el" href="tpi_8c_source.html#l00110">fin_espiracion</a>, <a class="el" href="tpi_8c_source.html#l00125">indice_de_capacidad_pulmonar</a>, <a class="el" href="tpi_8c_source.html#l00107">inicio_espiracion</a>, <a class="el" href="tpi_8c_source.html#l00104">msg</a>, <a class="el" href="tpi_8c_source.html#l00092">presion_Kpa</a>, <a class="el" href="tpi_8c_source.html#l00095">qv</a>, <a class="el" href="tpi_8c_source.html#l00122">tiempo_total</a>, <a class="el" href="tpi_8c_source.html#l00116">volumen_1s_FEV1</a> y <a class="el" href="tpi_8c_source.html#l00113">volumen_total_CVF</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00321">app_main()</a>.</p>

</div>
</div>
<a id="afaccfed84cd1498a05ea04a65f1209b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaccfed84cd1498a05ea04a65f1209b1">&#9670;&nbsp;</a></span>FuncTimerA()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FuncTimerA </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Función de callback del temporizador. Notifica a la tarea de medición de presión cuando se alcanza el período. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00136">136</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="tpi_8c_source.html#l00086">MedirPresionTaskHandle</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00321">app_main()</a>.</p>

</div>
</div>
<a id="a502ba15f62ab314bceffd8c35ceea29e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a502ba15f62ab314bceffd8c35ceea29e">&#9670;&nbsp;</a></span>Serial_Plotter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Serial_Plotter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Envía el voltaje leído por el sensor al Serial Plotter. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00263">263</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Hace referencia a <a class="el" href="uart__mcu_8h_source.html#l00032">UART_PC</a>, <a class="el" href="uart__mcu_8c_source.html#l00222">UartItoa()</a>, <a class="el" href="uart__mcu_8c_source.html#l00193">UartSendString()</a>, <a class="el" href="mp3v5050_8c_source.html#l00061">Valor_voltaje()</a> y <a class="el" href="tpi_8c_source.html#l00098">voltaje_mv</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentación de las variables</h2>
<a id="a72df3cb793dce94f98ee0a71b118e0bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72df3cb793dce94f98ee0a71b118e0bf">&#9670;&nbsp;</a></span>ActualizarLedsTaskHandle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskHandle_t ActualizarLedsTaskHandle = <a class="el" href="ili9341_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle de la tarea que actualiza los LEDs. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00089">89</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="af2fdc026289be03b84b5f4da8ce389c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fdc026289be03b84b5f4da8ce389c8">&#9670;&nbsp;</a></span>ciclos_sin_presion</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ciclos_sin_presion = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contador de ciclos consecutivos sin presión. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00128">128</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00176">Detectar_Inicio_Fin_Espiracion()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="a778e38aa889751afffa2dea6b803e67a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a778e38aa889751afffa2dea6b803e67a">&#9670;&nbsp;</a></span>dt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float dt = 0.1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delta de tiempo entre mediciones (en segundos). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00119">119</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00194">Calculo_FEV1_CVF()</a>.</p>

</div>
</div>
<a id="a873980a26076dfd1e6146db6ec732acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a873980a26076dfd1e6146db6ec732acc">&#9670;&nbsp;</a></span>fin_espiracion</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool fin_espiracion</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bandera que indica si se detectó el fin de espiración. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00110">110</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00176">Detectar_Inicio_Fin_Espiracion()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="ac6c28c79f23c747c4e9a0805ec9041f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6c28c79f23c747c4e9a0805ec9041f9">&#9670;&nbsp;</a></span>indice_de_capacidad_pulmonar</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float indice_de_capacidad_pulmonar</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Índice FEV1/CVF expresado en porcentaje. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00125">125</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00194">Calculo_FEV1_CVF()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="aff57ba52c04ea5592d7fbf4ff27d93b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff57ba52c04ea5592d7fbf4ff27d93b4">&#9670;&nbsp;</a></span>inicio_espiracion</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool inicio_espiracion</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bandera que indica si se detectó el inicio de espiración. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00107">107</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00176">Detectar_Inicio_Fin_Espiracion()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="a2c61b109a6870fef4d676096fa0ed473"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c61b109a6870fef4d676096fa0ed473">&#9670;&nbsp;</a></span>MedirPresionTaskHandle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskHandle_t MedirPresionTaskHandle = <a class="el" href="ili9341_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle de la tarea que mide presión. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00086">86</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00136">FuncTimerA()</a>.</p>

</div>
</div>
<a id="a53d2c7e452fa3160710875b92eaebf0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53d2c7e452fa3160710875b92eaebf0d">&#9670;&nbsp;</a></span>msg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char msg[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Buffer para mensajes a enviar por UART o BLE. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00104">104</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="ble__mcu_8c_source.html#l00545">BleSendString()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a>, <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a> y <a class="el" href="uart__mcu_8c_source.html#l00193">UartSendString()</a>.</p>

</div>
</div>
<a id="a53ebf8d5b2883994c8eec21614933117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53ebf8d5b2883994c8eec21614933117">&#9670;&nbsp;</a></span>periodo_actual</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t periodo_actual = <a class="el" href="tpi_8c.html#aca39b26c504c376043e30f633c1abaf8">PERIODO_MUESTREO</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Período actual del temporizador. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00101">101</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

</div>
</div>
<a id="a641435925a42f8dbbb8b754af49482d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a641435925a42f8dbbb8b754af49482d4">&#9670;&nbsp;</a></span>presion_Kpa</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float presion_Kpa = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Presión diferencial medida (en kPa). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00092">92</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00144">CalcularFlujoEspiracion()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a>, <a class="el" href="tpi_8c_source.html#l00176">Detectar_Inicio_Fin_Espiracion()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="a8973504ff871a1317a5554cdd01bf319"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8973504ff871a1317a5554cdd01bf319">&#9670;&nbsp;</a></span>qv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float qv = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flujo espirado en m³/s. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00095">95</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00144">CalcularFlujoEspiracion()</a>, <a class="el" href="tpi_8c_source.html#l00194">Calculo_FEV1_CVF()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="ad78bfbec0aad248d2f42f34aa6465600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78bfbec0aad248d2f42f34aa6465600">&#9670;&nbsp;</a></span>tiempo_total</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float tiempo_total = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tiempo total transcurrido desde el inicio de espiración. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00122">122</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00194">Calculo_FEV1_CVF()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="a5dcc5c9f58beecd216195a160a973a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dcc5c9f58beecd216195a160a973a4d">&#9670;&nbsp;</a></span>voltaje_mv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t voltaje_mv</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Voltaje leído en mV. </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00098">98</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00263">Serial_Plotter()</a> y <a class="el" href="mp3v5050_8c_source.html#l00061">Valor_voltaje()</a>.</p>

</div>
</div>
<a id="a7cf63394302df6aa5e35616d49482ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cf63394302df6aa5e35616d49482ab2">&#9670;&nbsp;</a></span>volumen_1s_FEV1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float volumen_1s_FEV1 = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Volumen espirado en el primer segundo (FEV1). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00116">116</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00194">Calculo_FEV1_CVF()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
<a id="a795639193e3f97984deccd59db746f43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795639193e3f97984deccd59db746f43">&#9670;&nbsp;</a></span>volumen_total_CVF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float volumen_total_CVF = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Volumen total espirado (CVF). </p>

<p class="definition">Definición en la línea <a class="el" href="tpi_8c_source.html#l00113">113</a> del archivo <a class="el" href="tpi_8c_source.html">tpi.c</a>.</p>

<p class="reference">Referenciado por <a class="el" href="tpi_8c_source.html#l00194">Calculo_FEV1_CVF()</a>, <a class="el" href="tpi_8c_source.html#l00244">Comunicacion_Serie()</a> y <a class="el" href="tpi_8c_source.html#l00155">FuncTecla1()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="dir_429d80758da54da73083af4edd40d0b3.html">projects</a></li><li class="navelem"><a class="el" href="dir_dfdef998be7e773c163f1632d17097a5.html">TPI</a></li><li class="navelem"><a class="el" href="dir_fd91698f305718f73f31a96c15b4d0d7.html">main</a></li><li class="navelem"><a class="el" href="tpi_8c.html">tpi.c</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
